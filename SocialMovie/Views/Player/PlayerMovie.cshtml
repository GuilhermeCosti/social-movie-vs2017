@using SocialMovie.Models
@using System.Collections.Generic

<h1></h1>

<div class="container-fluid" align="center">
    @{  var movie = (Movie)ViewData["movie"];
        <div class="row">
            <div class="offset-1 col-10 offset-1">
                <div class="row rounded" style="background-color: #CCCCCC">
                    <div class="offset-sm-2"></div>
                    <div class="col-sm-8">
                        <br />
                        <div align="center" class="embed-responsive embed-responsive-4by3" style="background-color: #5e5e5e">
                            <video class="embed-responsive-item rounded" id="video_@movie.Id" poster="https://socialmovie.sytes.net:4000/@movie.Thumbnail.FullPath" onClick="setupVideo('https', 'socialmovie.sytes.net','4000','@movie.VideoFile.Path', '@movie.VideoFile.Name', '@movie.VideoFile.Extension', '@movie.Id')" controls></video>
                        </div>
                        <div class="rounded" style="background-color: #AAAAAA">
                            <h3></h3>
                            <p><strong>@movie.Name </strong>@movie.Description</p>
                        </div>
                    </div>
                    <div class="offset-sm-2"></div>
                </div>
            </div>
        </div>
    }
    <div class="row">
        <div class="offset-1 col-10 offset-1">
            <div class="row rounded" style="background-color: #CCCCCC">
                <div class="offset-sm-6"></div>
                <div class="col-sm-4" style="background-color: #AAAAAA">
                    <p>Ratings</p>
                    @{
                        int[] stars = new int[5] { movie.Star1, movie.Star2, movie.Star3, movie.Star4, movie.Star5 };
                        int totalStars = movie.Star5 + movie.Star2 + movie.Star3 + movie.Star2 + movie.Star1;
                        int[] relativeStars = new int[5];
                        for (int i = 0; i < 5; i++)
                        {
                            relativeStars[i] = (stars[i] * 100) / (totalStars);
                        }
                        int j = 5;
                    }
                    @{  for (int i = 4; i >= 0; i--, j--)
                        {
                            <div class="row">
                                <div class="col-8">
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar"
                                             aria-valuemin="0" aria-valuemax="@totalStars.ToString()" style="width: @relativeStars[i].ToString()%">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-4">@j Star</div>
                            </div>
                        }
                    }
                    <br />
                </div>
                <div class="offset-sm-2"></div>
            </div>
            <br />
        </div>
        <br />
    </div>
    <div class="row">
        <div class="offset-1 col-10 offset-1">
            @{  var reviews = (List<Review>)ViewData["reviews"];
                foreach (var review in reviews)
                {
                    <h3>Title = @review.Title</h3>
                    <h4>Body = @review.Body</h4>
                    <p>User = @review.ReviewerId</p>
                    <p>Rating = @review.Rating</p>
                }
            }
        </div>
    </div>
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
</div>